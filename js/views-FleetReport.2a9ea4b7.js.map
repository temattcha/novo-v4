{"version":3,"file":"js/views-FleetReport.2a9ea4b7.js","mappings":"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","sources":["webpack://nvs-v4/./src/views/FleetReport.vue","webpack://nvs-v4/src/views/FleetReport.vue","webpack://nvs-v4/./src/views/FleetReport.vue?6c41","webpack://nvs-v4/./src/views/FleetReport.vue?a8dd"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"650\"}},[_c('v-form',[_c('v-card-title',[_c('span',{staticClass:\"text-h4 text-md-h3\"},[_vm._v(\"Relatório de Frota\")])]),_c('v-card-text',[_c('v-container',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"12\"}},[_c('v-autocomplete',{staticClass:\"grey-label\",attrs:{\"items\":_vm.plates,\"color\":\"blue\",\"outlined\":\"\",\"hide-details\":\"\",\"label\":\"Placa\",\"prepend-icon\":\"mdi-account-outline\",\"item-text\":\"PLACA\",\"item-value\":\"PLACA\",\"onkeyup\":\"this.value = this.value.toUpperCase()\"},on:{\"mouseover\":function($event){_vm.plates.length != 0 ? '' : _vm.fetchPlates()}},scopedSlots:_vm._u([{key:\"no-data\",fn:function(){return [_c('v-list-item',[_c('v-list-item-title',[_vm._v(\" Nenhum item encontrado \"),_c('br'),_c('br'),_c('v-progress-linear',{attrs:{\"indeterminate\":\"\",\"color\":\"blue\"}})],1)],1)]},proxy:true}]),model:{value:(_vm.plate),callback:function ($$v) {_vm.plate=$$v},expression:\"plate\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-autocomplete',{staticClass:\"grey-label\",attrs:{\"items\":_vm.plates,\"color\":\"blue\",\"hide-details\":\"\",\"prepend-icon\":\"mdi-map-marker-outline\",\"label\":\"Estado\",\"placeholder\":\"Selecione\",\"outlined\":\"\",\"item-text\":\"ESTADO\",\"item-value\":\"ESTADO\"},on:{\"mouseover\":function($event){_vm.plates.length != 0 ? '' : _vm.fetchPlates()}},model:{value:(_vm.state),callback:function ($$v) {_vm.state=$$v},expression:\"state\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-select',{staticClass:\"grey-label\",attrs:{\"color\":\"blue\",\"prepend-icon\":\"mdi-list-status\",\"hide-details\":\"\",\"multiple\":\"\",\"items\":_vm.licenceHeaders,\"label\":\"Status\",\"placeholder\":\"Selecione\",\"outlined\":\"\"},model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{staticClass:\"my-0 ms-2 pa-0\",attrs:{\"readonly\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"max-width\":\"100\",\"label\":\"Início\"},model:{value:(_vm.computedDateFormatted1),callback:function ($$v) {_vm.computedDateFormatted1=$$v},expression:\"computedDateFormatted1\"}}),_c('v-date-picker',{staticClass:\"ma-0 pa-0 mx-auto\",attrs:{\"color\":\"amber\",\"locale\":\"pt-BR\",\"no-title\":\"\"},model:{value:(_vm.date1),callback:function ($$v) {_vm.date1=$$v},expression:\"date1\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{staticClass:\"my-0 ms-2 pa-0\",attrs:{\"readonly\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"max-width\":\"100\",\"label\":\"Final\"},model:{value:(_vm.computedDateFormatted2),callback:function ($$v) {_vm.computedDateFormatted2=$$v},expression:\"computedDateFormatted2\"}}),_c('v-date-picker',{staticClass:\"ma-0 pa-0 mx-auto\",attrs:{\"color\":\"amber\",\"locale\":\"pt-BR\",\"no-title\":\"\"},model:{value:(_vm.date2),callback:function ($$v) {_vm.date2=$$v},expression:\"date2\"}})],1)],1)],1)],1),_c('v-card-actions',{staticClass:\"mt-n10 px-10 py-5\"},[_c('v-btn',{attrs:{\"fab\":\"\",\"small\":\"\",\"disabled\":!_vm.licences,\"loading\":_vm.loading2},on:{\"click\":function($event){return _vm.downloadPDF()}}},[_c('v-icon',{attrs:{\"dark\":\"\",\"color\":\"red darken-2\"}},[_vm._v(\" mdi-file-pdf-box \")])],1),_c('v-btn',{attrs:{\"fab\":\"\",\"small\":\"\",\"disabled\":!_vm.licences,\"loading\":_vm.loading3},on:{\"click\":function($event){return _vm.downloadXLSX('xlsx')}}},[_c('v-icon',{attrs:{\"dark\":\"\",\"color\":\"green darken-2\"}},[_vm._v(\" mdi-microsoft-excel \")])],1),_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-3 white--text\",\"loading\":_vm.loading},on:{\"click\":function($event){_vm.generateReport(), _vm.loading = true}}},[_vm._v(\" Gerar Relatório \")])],1)],1)],1)],1)],1),_c('v-row',[(_vm.showReport === true)?_c('v-container',[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.licences,\"footer-props\":{ itemsPerPageOptions: [5, 10, -1] }}})],1):_vm._e()],1)],1),_c('vue-html2pdf',{ref:\"html2Pdf\",attrs:{\"show-layout\":false,\"enable-download\":true,\"manual-pagination\":false,\"paginate-elements-by-height\":14001,\"filename\":_vm.reportName,\"pdf-quality\":2,\"pdf-format\":\"a4\",\"pdf-orientation\":\"landscape\",\"pdf-content-width\":\"100%\"},on:{\"startPagination\":function($event){_vm.loading2 = true},\"hasDownloaded\":function($event){_vm.loading2 = false}}},[_c('section',{attrs:{\"slot\":\"pdf-content\"},slot:\"pdf-content\"},[(_vm.showReport === true)?_c('v-container',[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.licences,\"footer-props\":{ itemsPerPageOptions: [-1] }}})],1):_vm._e()],1)]),_c('table',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"exportableTable\"},[_c('tr',_vm._l((_vm.headers),function(header,idx){return _c('th',{key:'header' + idx},[_vm._v(\" \"+_vm._s(header.text)+\" \")])}),0),_vm._l((_vm.licences),function(licence,idx){return _c('tr',{key:'data' + idx},[_c('td',[_vm._v(_vm._s(_vm.usDate(licence.DATA)))]),_c('td',[_vm._v(_vm._s(licence.SOLICITANTE))]),_c('td',[_vm._v(_vm._s(licence.EMPRESA))]),_c('td',[_vm._v(_vm._s(licence.ESTADO))]),_c('td',[_vm._v(_vm._s(licence.PLACA))]),_c('td',[_vm._v(_vm._s(licence.NUMTAXA))])])})],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-container>\n      <v-row>\n        <v-col\n          cols=\"12\"\n        >\n          <v-card\n            class=\"mx-auto\"\n            max-width=\"650\"\n          >\n            <v-form>\n              <v-card-title>\n                <span class=\"text-h4 text-md-h3\">Relatório de Frota</span>\n              </v-card-title>\n\n              <v-card-text>\n                <v-container>\n                  <v-row justify=\"center\">\n                    <v-col\n                      cols=\"12\"\n                      sm=\"6\"\n                      md=\"12\"\n                    >\n                      <v-autocomplete\n                        v-model=\"plate\"\n                        :items=\"plates\"\n                        color=\"blue\"\n                        class=\"grey-label\"\n                        outlined\n                        hide-details\n                        label=\"Placa\"\n                        prepend-icon=\"mdi-account-outline\"\n                        item-text=\"PLACA\"\n                        item-value=\"PLACA\"\n                        @mouseover=\"plates.length != 0 ? '' : fetchPlates()\"\n                        onkeyup=\"this.value = this.value.toUpperCase()\"\n                      >\n                        <template v-slot:no-data>\n                          <v-list-item>\n                            <v-list-item-title>\n                              Nenhum item encontrado\n                              <br><br>\n                              <v-progress-linear\n                                indeterminate\n                                color=\"blue\"\n                              />\n                            </v-list-item-title>\n                          </v-list-item>\n                        </template>\n                      </v-autocomplete>\n                    </v-col>\n                    <v-col\n                      cols=\"12\"\n                      md=\"6\"\n                    >\n                      <v-autocomplete\n                        v-model=\"state\"\n                        :items=\"plates\"\n                        color=\"blue\"\n                        class=\"grey-label\"\n                        hide-details\n                        prepend-icon=\"mdi-map-marker-outline\"\n                        label=\"Estado\"\n                        placeholder=\"Selecione\"\n                        outlined\n                        item-text=\"ESTADO\"\n                        item-value=\"ESTADO\"\n                        @mouseover=\"plates.length != 0 ? '' : fetchPlates()\"\n                      />\n                    </v-col>\n                    <v-col\n                      cols=\"12\"\n                      md=\"6\"\n                    >\n                      <v-select\n                        v-model=\"status\"\n                        color=\"blue\"\n                        class=\"grey-label\"\n                        prepend-icon=\"mdi-list-status\"\n                        hide-details\n                        multiple\n                        :items=\"licenceHeaders\"\n                        label=\"Status\"\n                        placeholder=\"Selecione\"\n                        outlined\n                      />\n                    </v-col>\n                    <v-col\n                      cols=\"12\"\n                      sm=\"6\"\n                    >\n                      <v-text-field\n                        v-model=\"computedDateFormatted1\"\n                        readonly\n                        outlined\n                        hide-details\n                        max-width=\"100\"\n                        label=\"Início\"\n                        class=\"my-0 ms-2 pa-0\"\n                      />\n                      <v-date-picker\n                        v-model=\"date1\"\n                        color=\"amber\"\n                        locale=\"pt-BR\"\n                        no-title\n                        class=\"ma-0 pa-0 mx-auto\"\n                      />\n                    </v-col>\n                    <v-col\n                      cols=\"12\"\n                      sm=\"6\"\n                    >\n                      <v-text-field\n                        v-model=\"computedDateFormatted2\"\n                        readonly\n                        outlined\n                        hide-details\n                        max-width=\"100\"\n                        label=\"Final\"\n                        class=\"my-0 ms-2 pa-0\"\n                      />\n                      <v-date-picker\n                        v-model=\"date2\"\n                        color=\"amber\"\n                        locale=\"pt-BR\"\n                        no-title\n                        class=\"ma-0 pa-0 mx-auto\"\n                      />\n                    </v-col>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n\n              <v-card-actions class=\"mt-n10 px-10 py-5\">\n                <v-btn\n                  fab\n                  small\n                  :disabled=\"!licences\"\n                  :loading=\"loading2\"\n                  @click=\"downloadPDF()\"\n                >\n                  <v-icon\n                    dark\n                    color=\"red darken-2\"\n                  >\n                    mdi-file-pdf-box\n                  </v-icon>\n                </v-btn>\n                <v-btn\n                  fab\n                  small\n                  :disabled=\"!licences\"\n                  :loading=\"loading3\"\n                  @click=\"downloadXLSX('xlsx')\"\n                >\n                  <v-icon\n                    dark\n                    color=\"green darken-2\"\n                  >\n                    mdi-microsoft-excel\n                  </v-icon>\n                </v-btn>\n                <v-spacer />\n                <v-btn\n                  color=\"blue darken-3 white--text\"\n                  :loading=\"loading\"\n                  @click=\"generateReport(), loading = true\"\n                >\n                  Gerar Relatório\n                </v-btn>\n              </v-card-actions>\n            </v-form>\n          </v-card>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-container v-if=\"showReport === true\">\n          <v-data-table\n            :headers=\"headers\"\n            :items=\"licences\"\n            :footer-props=\"{ itemsPerPageOptions: [5, 10, -1] }\"\n          />\n        </v-container>\n      </v-row>\n    </v-container>\n    <vue-html2pdf\n      :show-layout=\"false\"\n      :enable-download=\"true\"\n      :manual-pagination=\"false\"\n      :paginate-elements-by-height=\"14001\"\n      :filename=\"reportName\"\n      :pdf-quality=\"2\"\n      pdf-format=\"a4\"\n      pdf-orientation=\"landscape\"\n      pdf-content-width=\"100%\"\n      @startPagination=\"loading2 = true\"\n      @hasDownloaded=\"loading2 = false\"\n      ref=\"html2Pdf\"\n    >\n      <section slot=\"pdf-content\">\n        <v-container v-if=\"showReport === true\">\n          <v-data-table\n            :headers=\"headers\"\n            :items=\"licences\"\n            :footer-props=\"{ itemsPerPageOptions: [-1] }\"\n          />\n        </v-container>\n      </section>\n    </vue-html2pdf>\n    <table\n      v-show=\"false\"\n      ref=\"exportableTable\"\n    >\n      <tr>\n        <th\n          v-for=\"(header, idx) in headers\"\n          :key=\"'header' + idx\"\n        >\n          {{ header.text }}\n        </th>\n      </tr>\n      <tr\n        v-for=\"(licence, idx) in licences\"\n        :key=\"'data' + idx\"\n      >\n        <td>{{ usDate(licence.DATA) }}</td>\n        <td>{{ licence.SOLICITANTE }}</td>\n        <td>{{ licence.EMPRESA }}</td>\n        <td>{{ licence.ESTADO }}</td>\n        <td>{{ licence.PLACA }}</td>\n        <td>{{ licence.NUMTAXA }}</td>\n      </tr>\n    </table>\n  </div>\n</template>\n\n<script>\n  import axios from 'axios'\n  import VueHtml2pdf from 'vue-html2pdf'\n  import * as XLSX from 'xlsx/xlsx.mjs'\n\n  export default {\n    name: 'FleetReport',\n\n    components: {\n      VueHtml2pdf\n    },\n\n    data: () => ({\n      company: '',\n      state: '',\n      plate: '',\n      status: '',\n      table: '',\n      dateFormatted: '',\n      reportName: '',\n      showReport: false,\n      licences: null,\n      loading: false,\n      loading2: false,\n      loading3: false,\n      date1: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().substr(0, 10), // first day of the month\n      date2: (new Date(Date.now() - (new Date()).getTimezoneOffset() * 60000)).toISOString().substr(0, 10), // today\n      companies: [],\n      plates: [],\n      states: [],\n      headers: [\n        { text: 'ID', value: 'ID' },\n        { text: 'Placa', value: 'PLACA' },\n        { text: 'UF', value: 'ESTADO' },\n        { text: 'AET', value: 'AET' },\n        { text: 'Emissão', value: 'EMISSÃO' },\n        { text: 'Vencimento', value: 'VENCIMENTO' },\n        { text: 'Status', value: 'STATUSAET' },\n      ],\n      licenceHeaders: [\n        { text: 'Vencida', value: 'VENCIDA' },\n        { text: 'Válida', value: 'VALIDA' },\n        { text: 'Vencimento próximo', value: 'Vence em' },\n      ]\n    }),\n\n    computed: {\n      razaoSocial () {\n        return window.sessionStorage.razaosocial\n      },\n      computedDateFormatted1 () {\n        return this.formatDate(this.date1)\n      },\n      computedDateFormatted2 () {\n        return this.formatDate(this.date2)\n      },\n    },\n\n    watch: {\n      date1 () {\n        this.dateFormatted = this.formatDate(this.date1)\n      },\n      date2 () {\n        this.dateFormatted = this.formatDate(this.date2)\n      },\n      licences () {\n        return this.reportName = 'Relatório NVS ' + this.date2\n      },\n    },\n\n    created() {\n      // this.fetchCompanies()\n    },\n\n    methods: {\n      // fetchCompanies () {\n      //   return fetch('https://sheetdb.io/api/v1/afxq0nl1f0gvg')\n      //     .then((r) => r.json())\n      //     .then((r) => {\n      //       this.companies = r\n      //     })\n      // },\n      fetchPlates () {\n        fetch('https://sheetdb.io/api/v1/afxq0nl1f0gvg')\n          .then((r) => r.json())\n          .then((r) => {\n            this.companies = r\n          }\n        ).then(() => {\n            let plate = this.companies.filter(item => (this.razaoSocial === item.EMPRESA))\n            this.plates = plate\n            console.log(this.plates)\n          })\n      },\n      formatDate (date) {\n        if (!date) return null\n        var [year, month, day] = date.split('-')\n        return `${day.padStart(2, '0')}/${month.padStart(2, '0')}/${year}`\n      },\n      parseDate (date) {\n        if (!date) return null\n        const [day, month, year] = date.split('/')\n        return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`\n      },\n      usDate (date) {\n        if (!date) return null\n        const [day, month, year] = date.split('/')\n        var secs = '00:00:28'\n        return `${month.padStart(2, '0')}/${day.padStart(2, '0')}/${year} ${secs}`\n      },\n      fetchLicences () {\n        return axios.get('https://sheetdb.io/api/v1/afxq0nl1f0gvg')\n      },\n      generateReport () {\n        this.fetchLicences().then((r) => {\n          var table = r.data\n\n          this.$nextTick(() => {\n            var totalResult = ''\n            var totalResult1 = ''\n            var totalResult2 = ''\n            var totalResult3 = ''\n            totalResult = table.filter(item =>\n              item.EMPRESA.includes(this.company) &&\n              item.PLACA.includes(this.plate) &&\n              item.ESTADO.includes(this.state) &&\n              item.STATUSAET.includes(this.status) &&\n              this.parseDate(item.DATA).replace(/-/g, '') >= this.date1.replace(/-/g, '') &&\n              this.parseDate(item.DATA).replace(/-/g, '') <= this.date2.replace(/-/g, '')\n            )\n            totalResult1 = table.filter(item =>\n              item.EMPRESA.includes(this.company) &&\n              item.PLACA.includes(this.plate) &&\n              item.ESTADO.includes(this.state) &&\n              item.STATUSAET.includes(this.status[0]) &&\n              this.parseDate(item.DATA).replace(/-/g, '') >= this.date1.replace(/-/g, '') &&\n              this.parseDate(item.DATA).replace(/-/g, '') <= this.date2.replace(/-/g, '')\n            )\n            totalResult2 = table.filter(item =>\n              item.EMPRESA.includes(this.company) &&\n              item.PLACA.includes(this.plate) &&\n              item.ESTADO.includes(this.state) &&\n              item.STATUSAET.includes(this.status[1]) &&\n              this.parseDate(item.DATA).replace(/-/g, '') >= this.date1.replace(/-/g, '') &&\n              this.parseDate(item.DATA).replace(/-/g, '') <= this.date2.replace(/-/g, '')\n            )\n            totalResult3 = table.filter(item =>\n              item.EMPRESA.includes(this.company) &&\n              item.PLACA.includes(this.plate) &&\n              item.ESTADO.includes(this.state) &&\n              item.STATUSAET.includes(this.status[2]) &&\n              this.parseDate(item.DATA).replace(/-/g, '') >= this.date1.replace(/-/g, '') &&\n              this.parseDate(item.DATA).replace(/-/g, '') <= this.date2.replace(/-/g, '')\n            )\n\n            this.status.length === 0 ? this.licences = totalResult : this.licences = totalResult1.concat(totalResult2).concat(totalResult3)\n\n            this.showReport = true\n            this.loading = false\n          })\n        })\n      },\n      downloadPDF () {\n        this.$refs.html2Pdf.generatePdf()\n      },\n      downloadXLSX (type, fn, dl) {\n        var el = this.$refs.exportableTable\n        var wb = XLSX.utils.table_to_book(el, {sheet:'Relatório'})\n        this.loading3 = true\n        setTimeout(() => {\n          this.loading3 = false\n          return dl ?\n            XLSX.write(wb, {bookType: type, bookSTT: true, type: 'string'}) :\n            XLSX.writeFile(wb, fn || (this.reportName + '.' +  (type || 'xlsx')))\n        }, 100)\n      },\n    },\n  }\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FleetReport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FleetReport.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FleetReport.vue?vue&type=template&id=ad19c9c4&\"\nimport script from \"./FleetReport.vue?vue&type=script&lang=js&\"\nexport * from \"./FleetReport.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["staticClass","_vm","scopedSlots","fn","_c","attrs","proxy","model","value","plate","expression","plates","length","callback","status","computedDateFormatted1","date1","computedDateFormatted2","date2","loading","generateReport","itemsPerPageOptions","on","loading2","$event","slot","headers","licences","directives","name","rawName","ref","licence","idx","key","components","VueHtml2pdf","data","company","state","table","dateFormatted","reportName","showReport","loading3","companies","states","text","licenceHeaders","computed","razaoSocial","watch","created","methods","fetchPlates","fetch","then","console","formatDate","parseDate","usDate","fetchLicences","totalResult","item","totalResult1","totalResult2","totalResult3","downloadPDF","downloadXLSX","sheet","setTimeout","XLSX","bookType","bookSTT","type","component","render","staticRenderFns"],"sourceRoot":""}